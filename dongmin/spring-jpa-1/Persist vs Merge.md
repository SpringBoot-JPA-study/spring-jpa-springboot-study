# 👉🏻 Persist vs Merge

- `persist`: 최초 생성된 엔티티를 영속화하는 기능
- `merge`: `준영속(detached)` 상태의 엔티티를 다시 영속화하는 기능

  - **`영속화(Persistence)`** : 영속성 컨텍스트에 관리되는 상태로 만드는 것
  - **`준영속 상태`** : 영속 상태의 엔티티가 영속성 컨텍스트에서 분리된 상태
  - 즉, **`준영속 엔티티`** 는 영속성 컨텍스트가 관리하지 않는 엔티티를 말한다.
  - 준영속 상태에선 영속성 컨텍스트가 제공하는 기능을 사용할 수 없다. `대표적으로 변경 감지`

- merge의 단점은 모든 값들을 업데이트 하기 때문에 값이 세팅되지 않으면 null로 처리해버린다.
  - 부분 변경이 불가능하기 때문에 **`Dirty Checking`** 을 사용해서 변경을 하는 것이 안전하다.

# 🍯 Tips

- service 클래스가 repository의 메서드를 위임받아 실행해주는 역할만 하는 경우  
  controller에서 바로 repository에 접근해서 사용해도 문제없다.

- 간단한 기능들은 service에 위임하지 않고 repository에 직접 접근해서 실행하는 것도 괜찮은 선택이다.

# < 6강. 영속성 컨텍스트1 >


### JPA에서 중요한 2가지

- 매핑과 관계된 설계
- 영속성 컨텍스트

---

### 매핑

- ORM :  객체와 RDB의 매핑,
- 그리고 그것을 위한, 객체와 DB의 설계

---

### PersistenceContext : 영속성 컨텍스트

- 일종의 기억 공간 (간단하게 설명하면)
- “엔티티를 영구 저장하는 환경”이라는 뜻
- 엄밀하게는 논리적 개념으로서의 공간
- 엔티티 매니저 내부에서 관리하는 환경공간
- 기타내용
    - 환경에 따른 매치 → 나중에
        - 1:1 매치
        - N:1 매치

---

### 엔티티의 생명주기

- 엔티티가 영속성 컨텍스트 및 DB와 맺는 관계를 통해 생명주기 결정된다고 보면 될 듯.
- 더 간단하게는, 영속성 컨텍스트에 엔티티가 들어가있냐 아니냐 등의 관계로 결정
- 4가지 생명주기
    1. new/transient :   영속성 컨테스트와 관계없음. (이런 경우는 걍, 외부에서 객체로 만들어진 경우)
    2. managed :  컨텍스트에서 관리되어지는 → 즉 영속
    3. detached :  컨텍스트에서 분리되어저서, 관계가 없어진 →준영속 (그런데 왜 준영속?)
    4. removed :  삭제된 상태

---

### 영속성 컨텍스트의 이점

→ 애플리케이션과 DB 사이에 존재하며 이점을 제공

- 1차캐시
- 동일성 (identity) 보장
- 트랜잭션을 지원하는 **쓰기지연** (transactional write-behind)
- 변경 감지 (Dirty Checking)
- 지연 로딩 (Lazy Loading)

---

그 다음 수업도 들었으나,,, 일단 여기까지

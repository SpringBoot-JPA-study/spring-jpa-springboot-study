# 일대일(1:1)

## 특징

- 일대일 관계는 그 반대도 일대일
    - 양방향을 만들어주는 경우 반대편에도 @OneToOne으로 지
- 주 테이블 또는 대상 테이블에 외래키 선택 가능
    - 어디에 외래키를 두어도 상관없음
    - 근데 DB랑 객체 연관관계가 일치해야함
- 외래키에 데이터베이스 유니크 제약 조건을 추가

### 주 테이블에 외래키 양방향 정리

ex. MEMBER - MEMBER

- 다대일 양방향 매핑처럼 외래키가 있는 곳이 연관관계의 주인
- 반대편은 mappedBy적용

### 대상 테이블에 외래키 양방향 정리

ex. MEMBER - TEAM

- JPA는 대상 테이블에 외래키 단방향 지정 기능을 지원하지 않음
    - 야매로 적용하는 방법도 없
- 양방향 관계만 지원함

⇒ 엔티티에 있는 외래키를 자신이 직접 관리해야함!

## 비교
| 주 테이블에 외래키 | 대상 테이블에 외래키 |
| --- | --- |
| - 주 테이블에 외래키를 두고 대상 테이블을 찾음<br>- 객체지향 개발자가 선호하는 방식<br>- JPA 매핑이 편리함 (단방향만으로도 설계 가능)<br>- 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능<br>- 값이 없으면 외래키에 NULL을 허용하는 단점 존재<br>(DBA에게는 치명적) | - 대상 테이블에 외래키 존재<br>- 전통적 데이터베이스 개발자가 선호하는 방식<br>- (지금은 1:1관계지만 미래에 N:1이 될 가능성이 있으므로) <br>주 테이블과 대상 테이블을 일대일에서 일대다로 변경할 때 <br>테이블 구조가 유지됨 <br>(외래키를 들고있는 쪽이 N쪽이 되기 때문에 <br>연관관계의 주인을 바꾸지 않아도 됨)<br>- 프록시 기능의 한계로 지연 로딩으로 설정해도 항상 즉시 로딩됨 |

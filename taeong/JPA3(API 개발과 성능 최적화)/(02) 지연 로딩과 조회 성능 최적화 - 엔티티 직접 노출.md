# ê°„ë‹¨í•œ ì£¼ë¬¸ ì¡°íšŒ v1 : ì—”í‹°í‹°ë¥¼ ì§ì ‘ ë…¸ì¶œ


Order ì—”í‹°í‹°ê°€ ì•„ë˜ì™€ ê°™ì´  Memberì—”í‹°í‹°ì™€ ManyToOne ê´€ê³„ë¡œ ë§¤í•‘ë˜ì–´ìˆëŠ” ê²½ìš°,

```java
@Entity
public class Order {
  @ManyToOne(fetch = FetchType.LAZY)  //orderìª½ì´ ë‹¤, memberìª½ì´ ì¼
  @JoinColumn(name = "member_id")
  private Member member;
	...
}
```

ì—”í‹°í‹°ë¥¼ ê·¸ëŒ€ë¡œ ì „ì²´ì¡°íšŒí•˜ë©´ 

```java
@GetMapping("/api/v1/simple-orders")
public List<Order> orderV1() {
    List<Order> all = orderRepository.findAll();
    return all;
}
```

ë‹¤ìŒê³¼ ê°™ì´ ë¬´í•œë£¨í”„ì— ë¹ ì§€ê²Œ ëœë‹¤.

```json
[
    {
        "id": 4,
        "member": {
            "id": 1,
            "name": "userA",
            "address": {
                "city": "ì„œìš¸",
                "street": "1",
                "zipcode": "1111"
            },
            "orders": [
                {
                    "id": 4,
                    "member": {
                        "id": 1,
                        "name": "userA",
                        "address": {
                            "city": "ì„œìš¸",
                            "street": "1",
                            "zipcode": "1111"
                        },
                        "orders": [
                            {
                                "id": 4,
                                "member": {
                                    "id": 1,
                                    "name": "userA",
                                    "address": {
                                        "city": "ì„œìš¸",
                                        "street": "1",
                                        "zipcode": "1111"
                                    },
                                    "orders": [
                                        {
                                            "id": 4,
                                            "member": {
                                                "id": 1,
                                                "name": "userA",
                                                "address": {
                                                    "city": "ì„œìš¸",
                                                    "street": "1",
                                                    "zipcode": "1111"
                                                },
                                                "orders": [
                                                    {
                                                        "id": 4,
                                                        "member": {
                                                            "id": 1,
                                                            "name": "userA",
                                                            "address": {
                                                                "city": "ì„œìš¸",
                                                                "street": "1",
                                                                "zipcode": "1111"
                                                            },
                                                            "orders": [
                                                                {
                                                                    "id": 4,
                                                                    "member": {
```

- ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì—ì„œëŠ” ì´ëŸ° ë¬´í•œë£¨í”„ê°€ ë°œìƒí•¨
- í•´ê²°í•´ì£¼ë ¤ë©´ í•œìª½ì— `@JsonIgnore`ë¥¼ ë¶™ì—¬ì•¼ í•˜ëŠ”ë°.. ë¶™ì´ê³  ë‚˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•¨
    
    *No serializer found for class org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)*
    
- order membeëŠ” **ì§€ì—° ë¡œë”©**ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œ ì—”í‹°í‹° ëŒ€ì‹ ì— **í”„ë¡ì‹œ**ê°€ ì¡´ì¬
    - â‡’ í”„ë¡ì‹œê°€ *ByteBuddyë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ*
- **jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì´ í”„ë¡ì‹œ ê°ì²´ë¥¼ jsonìœ¼ë¡œ ì–´ë–»ê²Œ ìƒì„±í•´ì•¼ í•˜ëŠ”ì§€ ëª¨ë¦„ ì˜ˆì™¸ ë°œìƒ**
- Hibernate5Module ì„ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ í•´ê²°ë˜ê¸´í•˜ì§€ë§Œ ì¢‹ì€ ì „ëµì€ ì•„ë‹˜

<br>

ğŸ’¡ ì£¼ì˜: ì—”í‹°í‹°ë¥¼ ì§ì ‘ ë…¸ì¶œí•  ë•ŒëŠ” ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ê°€ ê±¸ë¦° ê³³ì€ ê¼­! í•œê³³ì„ `@JsonIgnore` ì²˜ë¦¬ í•´ì•¼ í•œë‹¤.
ì•ˆê·¸ëŸ¬ë©´ ì–‘ìª½ì„ ì„œë¡œ í˜¸ì¶œí•˜ë©´ì„œ ë¬´í•œ ë£¨í”„ê°€ ê±¸ë¦°ë‹¤.

ğŸ’¡ ì°¸ê³ : ì•ì—ì„œ ê³„ì† ê°•ì¡°í–ˆë“¯ì´ ì •ë§ ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì•„ë‹ˆë©´ ì—”í‹°í‹°ë¥¼ API ì‘ë‹µìœ¼ë¡œ ì™¸ë¶€ë¡œ ë…¸ì¶œí•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤. ë”°ë¼ì„œ Hibernate5Module ë¥¼ ì‚¬ìš©í•˜ê¸° ë³´ë‹¤ëŠ” `DTOë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜`í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì€ ë°©ë²•ì´ë‹¤.

